<html>
<header><title>Dad jokes for TTS</title></header>
<body>
  Your dad joke is on its way, courtesy of icanhazdadjoke.com ....
</body>
</html>

<script>
  
  function respond(data) {
    // Ping a discord
    var xhr = new XMLHttpRequest();
    var url = "https://discordapp.com/api/webhooks/359829341670080514/_Lh6N1M9VRg_J4BAmOncyX9zqK9FCaDvnaeqDdgDG9gEaWy32mzYv9FGjs_Pj-RCtarG";
    xhr.open("POST", url, true);
    xhr.setRequestHeader("Content-type", "application/json");
    var ping = {};
    ping.content = "Ping";
    xhr.send(JSON.stringify(ping));
    
    console.log(data)
    //window.location.href = 'https://tjakubo2.github.io/TTS_dadjoke/success?response=' + data
  }
  function error() {
    window.location.href = 'https://tjakubo2.github.io/TTS_dadjoke/error'
  }
  var xhr = new XMLHttpRequest();
  xhr.open('GET', "https://icanhazdadjoke.com/", true);
  xhr.setRequestHeader('Accept', 'application/json');
  xhr.onload = function() {
    var status = xhr.status;
    if (status === 200) {
      respond(xhr.response.joke);
    } else {
      error();
    }
  };
  xhr.send();
  
</script>
